# Cloudflare Tunnel configuration for account: {{ getenv "ACCOUNT_NAME" }}
ingress:
{% raw %}
  {{ $accountName := getenv "ACCOUNT_NAME" }}
  {{range .Containers}}
    {{if and (eq .Labels.cloudflared_account $accountName) .Labels.cloudflared_hostname}}
  # Container: {{ .Name }}
  - hostname: {{ .Labels.cloudflared_hostname }}
    service: {{ .Labels.cloudflared_service }}
    {{end}}
  {{end}}
{% endraw %}
  # Default catch-all route
  - service: http_status:404